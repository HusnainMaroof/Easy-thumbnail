// prisma/schema.prisma
// Define your database models


generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

// Define ENUM first
enum UserStatus {
  PENDING
  ACTIVE
  SUSPENDED
  DELETED
}

model User {
  id             String      @id @default(uuid())
  email          String      @unique
  password       String
  displayName    String?
  emailVerified  Boolean     @default(false)
  status         UserStatus  @default(PENDING)  // <-- ENUM used here
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  userToken      String?
  emailVerifications EmailVerification[]
}

model EmailVerification {
  id           String   @id @default(uuid())
  userId       String
  code         String
  expiresAt    DateTime
  attemptCount Int      @default(0)
  otpToken     String?
  createdAt    DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}